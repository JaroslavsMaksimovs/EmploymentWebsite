{"ast":null,"code":"var _jsxFileName = \"/Users/Jaroslav/Desktop/COMP0029/employment-website/src/pages/LoginPage.js\";\nimport React, { useState, useEffect } from 'react';\nimport { Redirect } from 'react-router-dom';\nimport { verify } from 'password-hash';\n\nconst LoginPage = ({\n  setUser\n}) => {\n  const [state, setState] = useState('default');\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [navigate, setNavigate] = useState(false);\n  useEffect(() => {\n    const listener = event => {\n      if (event.code === \"Enter\" || event.code === \"NumpadEnter\") {\n        document.getElementById(\"button\").click();\n      }\n    };\n\n    document.addEventListener(\"keydown\", listener);\n    return () => {\n      document.removeEventListener(\"keydown\", listener);\n    };\n  }, []);\n\n  const login = async () => {\n    const result = await fetch(`/api/seekers/${email}`);\n\n    if (result.status === 200) {\n      const accountInfo = await result.json();\n\n      if (verify(password, accountInfo.hashPassword)) {\n        setUser(accountInfo);\n        setNavigate(true);\n      } else {\n        setState('incorrectPassword');\n      }\n    } else {\n      setState('incorrectEmail');\n    }\n  };\n\n  if (navigate) {\n    return React.createElement(Redirect, {\n      to: \"/\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 41\n      },\n      __self: this\n    });\n  }\n\n  return React.createElement(React.Fragment, null, React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47\n    },\n    __self: this\n  }, React.createElement(\"h1\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48\n    },\n    __self: this\n  }, \"Login\"), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51\n    },\n    __self: this\n  }, \"E-mail:\", React.createElement(\"input\", {\n    type: \"text\",\n    value: email,\n    onChange: event => setEmail(event.target.value),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53\n    },\n    __self: this\n  }))), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57\n    },\n    __self: this\n  }, \"Password:\", React.createElement(\"input\", {\n    type: \"password\",\n    value: password,\n    onChange: event => setPassword(event.target.value),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59\n    },\n    __self: this\n  })))), React.createElement(\"p\", {\n    style: {\n      display: state === 'incorrectEmail' ? 'block' : 'none'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63\n    },\n    __self: this\n  }, \" This account does not exist \"), React.createElement(\"p\", {\n    style: {\n      display: state === 'incorrectPassword' ? 'block' : 'none'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64\n    },\n    __self: this\n  }, \" Incorrect password \"), React.createElement(\"button\", {\n    id: \"button\",\n    onClick: () => login(),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65\n    },\n    __self: this\n  }, \"Log in\")));\n};\n\nexport default LoginPage;","map":{"version":3,"sources":["/Users/Jaroslav/Desktop/COMP0029/employment-website/src/pages/LoginPage.js"],"names":["React","useState","useEffect","Redirect","verify","LoginPage","setUser","state","setState","email","setEmail","password","setPassword","navigate","setNavigate","listener","event","code","document","getElementById","click","addEventListener","removeEventListener","login","result","fetch","status","accountInfo","json","hashPassword","target","value","display"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Redirect } from 'react-router-dom';\nimport { verify } from 'password-hash';\n\nconst LoginPage = ({ setUser }) => {\n  const [state, setState] = useState('default');\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [navigate, setNavigate] = useState(false);\n\n\n  useEffect(() => {\n    const listener = (event) => {\n      if (event.code === \"Enter\" || event.code === \"NumpadEnter\") {\n        document.getElementById(\"button\").click();\n      }\n    };\n    document.addEventListener(\"keydown\", listener);\n    return () => {\n      document.removeEventListener(\"keydown\", listener);\n    };\n  }, []);\n\n\n  const login = async () => {\n    const result = await fetch(`/api/seekers/${email}`);\n    if (result.status === 200) {\n      const accountInfo = await result.json();\n      if (verify(password, accountInfo.hashPassword)) {\n        setUser(accountInfo);\n        setNavigate(true);\n      } else {\n        setState('incorrectPassword');\n      }\n    } else {\n      setState('incorrectEmail');\n    }\n  };\n\n  if (navigate) {\n    return <Redirect to=\"/\"/>\n  }\n\n\n  return(\n    <>\n      <div>\n        <h1>Login</h1>\n        <div>\n          <div>\n            <label>\n              E-mail:\n              <input type=\"text\" value={email} onChange={(event) => setEmail(event.target.value)} />\n            </label>\n          </div>\n          <div>\n            <label>\n              Password:\n              <input type=\"password\" value={password} onChange={(event) => setPassword(event.target.value)} />\n            </label>\n          </div>\n        </div>\n        <p style={{ display: (state==='incorrectEmail') ? 'block' : 'none'}}> This account does not exist </p>\n        <p style={{ display: (state==='incorrectPassword') ? 'block' : 'none'}}> Incorrect password </p>\n        <button id=\"button\" onClick={() => login()}>Log in</button>\n      </div>\n    </>\n  );\n\n\n\n\n}\n\n\nexport default LoginPage;\n"]},"metadata":{},"sourceType":"module"}