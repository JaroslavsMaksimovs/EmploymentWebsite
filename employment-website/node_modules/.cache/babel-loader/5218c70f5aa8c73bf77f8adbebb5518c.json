{"ast":null,"code":"var _jsxFileName = \"/Users/Jaroslav/Desktop/COMP0029/employment-website/src/pages/LoginPage.js\";\nimport React, { useState, useEffect } from 'react';\nimport { Redirect } from 'react-router-dom';\nimport { verify } from 'password-hash';\n\nconst LoginPage = ({\n  setUser\n}) => {\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [error, setError] = useState('');\n  const [navigate, setNavigate] = useState(false);\n  useEffect(() => {\n    const listener = event => {\n      if (event.code === \"Enter\" || event.code === \"NumpadEnter\") {\n        document.getElementById(\"button\").click();\n      }\n    };\n\n    document.addEventListener(\"keydown\", listener);\n    return () => {\n      document.removeEventListener(\"keydown\", listener);\n    };\n  }, []);\n\n  const login = async () => {\n    const result = await fetch(`/api/seekers/${email}`);\n    const accountInfo = await result.json();\n\n    if (accountInfo.message !== 'No such email') {\n      if (verify(password, accountInfo.hashPassword)) {\n        setUser(accountInfo);\n        setNavigate(true);\n      } else {\n        setError('incorrectPassword');\n      }\n    } else {\n      setError('incorrectEmail');\n    }\n  };\n\n  if (navigate) {\n    return React.createElement(Redirect, {\n      to: \"/\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 41\n      },\n      __self: this\n    });\n  }\n\n  return React.createElement(React.Fragment, null, React.createElement(\"div\", {\n    className: \"loginbox\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47\n    },\n    __self: this\n  }, React.createElement(\"h1\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48\n    },\n    __self: this\n  }, \"Login\"), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50\n    },\n    __self: this\n  }, \"E-mail\"), React.createElement(\"input\", {\n    type: \"text\",\n    value: email,\n    onChange: event => setEmail(event.target.value),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54\n    },\n    __self: this\n  }, \"Password\"), React.createElement(\"input\", {\n    type: \"password\",\n    value: password,\n    onChange: event => setPassword(event.target.value),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55\n    },\n    __self: this\n  })), error === 'incorrectEmail' && React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57\n    },\n    __self: this\n  }, \" This account does not exist \"), error === 'incorrectPassword' && React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58\n    },\n    __self: this\n  }, \" Incorrect password \"), React.createElement(\"button\", {\n    id: \"button\",\n    onClick: login,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59\n    },\n    __self: this\n  }, \"Log in\")));\n};\n\nexport default LoginPage;","map":{"version":3,"sources":["/Users/Jaroslav/Desktop/COMP0029/employment-website/src/pages/LoginPage.js"],"names":["React","useState","useEffect","Redirect","verify","LoginPage","setUser","email","setEmail","password","setPassword","error","setError","navigate","setNavigate","listener","event","code","document","getElementById","click","addEventListener","removeEventListener","login","result","fetch","accountInfo","json","message","hashPassword","target","value"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Redirect } from 'react-router-dom';\nimport { verify } from 'password-hash';\n\nconst LoginPage = ({ setUser }) => {\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [error, setError] = useState('');\n  const [navigate, setNavigate] = useState(false);\n\n\n  useEffect(() => {\n    const listener = (event) => {\n      if (event.code === \"Enter\" || event.code === \"NumpadEnter\") {\n        document.getElementById(\"button\").click();\n      }\n    };\n    document.addEventListener(\"keydown\", listener);\n    return () => {\n      document.removeEventListener(\"keydown\", listener);\n    };\n  }, []);\n\n\n  const login = async () => {\n    const result = await fetch(`/api/seekers/${email}`);\n    const accountInfo = await result.json();\n    if (accountInfo.message !== 'No such email') {\n      if (verify(password, accountInfo.hashPassword)) {\n        setUser(accountInfo);\n        setNavigate(true);\n      } else {\n        setError('incorrectPassword');\n      }\n    } else {\n      setError('incorrectEmail');\n    }\n  };\n\n  if (navigate) {\n    return <Redirect to=\"/\"/>\n  }\n\n\n  return(\n    <>\n      <div className=\"loginbox\">\n        <h1>Login</h1>\n          <div>\n            <label>E-mail</label>\n            <input type=\"text\" value={email} onChange={(event) => setEmail(event.target.value)} />\n          </div>\n          <div>\n            <label >Password</label>\n            <input type=\"password\" value={password} onChange={(event) => setPassword(event.target.value)} />\n          </div>\n        {(error === 'incorrectEmail') && <p> This account does not exist </p>}\n        {(error === 'incorrectPassword') && <p> Incorrect password </p>}\n        <button id=\"button\" onClick={login}>Log in</button>\n      </div>\n    </>\n  );\n}\n\nexport default LoginPage;\n"]},"metadata":{},"sourceType":"module"}